let products = {
    datakopi: [
    {
        productName: "Ice Coffee ori",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Coffee/16 ice coffee original.png",
        description: "Ice Coffee Original adalah minuman yang menyegarkan dan membangkitkan yang terdiri dari kopi yang diseduh dengan air panas dan kemudian disajikan dengan es batu. Minuman ini memiliki cita rasa yang klasik dan kuat dari kopi.  "
    },
    {
        productName: "Americano",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/48 americano.png",
        description: "Americano adalah minuman kopi yang lezat dan menyegarkan, terdiri dari espresso yang dicampur dengan air panas. Dengan rasa yang lebih ringan dibandingkan dengan espresso murni, Americano menawarkan keseimbangan yang sempurna antara keasaman dan kekuatan kopi."
    },
    {
        productName: "Ice Coffee Hazelnut",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Coffee/17 ice coffee hazelnut.png",
        description: "Ice Coffee Hazelnut adalah minuman yang menyegarkan dan lezat yang terdiri dari kopi yang diseduh dengan air panas dan kemudian dicampur dengan sirup hazelnut yang kaya rasa. Minuman ini disajikan dengan es batu untuk memberikan sensasi kesegaran yang menyenangkan. Ice Coffee Hazelnut memiliki rasa kopi yang klasik dengan sentuhan manis dan aroma kacang hazelnut yang khas."
    },
    {
        productName: "Ice Kopi Vanilla",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Coffee/18 ice coffee vanilla.png",
        description: "Ice Coffee Vanilla adalah minuman yang menyegarkan dan menggugah selera yang terdiri dari kopi yang diseduh dengan air panas dan kemudian dicampur dengan sirup vanila yang lezat. Minuman ini disajikan dengan es batu untuk memberikan sensasi kesegaran yang menyenangkan. Ice Coffee Vanilla memiliki rasa kopi yang klasik dengan sentuhan manis dan aroma vanilla yang khas. "
    },
    {
        productName: "Ice Kopi Gula Aren",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Coffee/19 ice coffee gula aren.png",
        description: "Ice Coffee Gula Aren adalah minuman yang menyegarkan dan kaya cita rasa yang terdiri dari kopi yang diseduh dengan air panas dan kemudian dicampur dengan gula aren yang memberikan sentuhan manis khas. Minuman ini disajikan dengan es batu untuk memberikan sensasi kesegaran yang menyenangkan. Ice Coffee Gula Aren memiliki rasa kopi yang klasik dengan tambahan kekhasan dari gula aren, memberikan kesan manis dan lembut. "
    },
    {
        productName: "Ice Kopi Banana",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Coffee/20 ice coffee banana.png",
        description: "Ice Coffee Banana adalah minuman yang segar dan unik yang menggabungkan rasa kopi yang klasik dengan sentuhan manis alami dari pisang. Minuman ini biasanya terdiri dari kopi yang diseduh dengan air panas, kemudian dicampur dengan potongan pisang matang dan disajikan dengan es batu. Ice Coffee Banana memiliki cita rasa yang seimbang antara keasaman kopi dan manisnya pisang, menciptakan kombinasi yang menyegarkan dan lezat."
    },
    {
        productName: "Ice Cappucino",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/60 cappucino ice.png",
        description: "Minuman Cappucino Ice adalah kombinasi yang menyegarkan dan memuaskan dari espresso, susu, dan es batu. Dengan dasar espresso yang kuat, campuran susu yang lembut, dan es batu yang menyegarkan, Cappuccino Ice menawarkan sensasi yang unik dengan rasa kopi yang khas dan sentuhan kesegaran es. Cocok untuk dinikmati di cuaca panas atau sebagai penyegar di tengah hari yang sibuk, Cappuccino Ice memberikan pengalaman kopi yang memuaskan dengan sentuhan yang menyegarkan."
    },
    {
        productName: "Ice Vanila Latte",
        category: "Cold",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/62 vanilla latte ice.png",
        description: "Vanilla Latte Ice adalah minuman yang segar dan menggoda, menggabungkan kelezatan espresso dengan aroma vanila yang manis, susu dingin, dan es batu yang menyegarkan. Dengan sentuhan vanila yang memikat, minuman ini memberikan rasa yang lembut dan seimbang antara manis dan kopi yang kaya. Cocok untuk dinikmati di siang hari yang panas atau sebagai penyegar di tengah hari yang sibuk, Vanilla Latte Ice adalah pilihan yang memuaskan bagi pecinta kopi yang menginginkan sesuatu yang berbeda namun tetap menyegarkan."
    },
    {
        productName: "v-drip",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/22 V-drip.png",
        description: ""
    },
    {
        productName: "Tubruk Susu",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/24 tubruk susu.png",
        description: ""
    },
    {
        productName: "Kopi Coklat",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/25 kopi coklat.png",
        description: ""
    },
    {
        productName: "Kopi Susu",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/26.Kopi susu cr1.png",
        description: ""
    },
    {
        productName: "Kopi Tutup Susu",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/30 kopi tutup susu.png",
        description: ""
    },
    {
        productName: "Hot Cappucino",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/61 cappucino hot.png",
        description: ""
    },
    {
        productName: "Hot Vanila Latte",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/61 cappucino hot.png",
        description: ""
    },
    {
        productName: "Espresso",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/50 espresso.png",
        description: ""
    },
    {
        productName: "Double Espresso",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/47 double espresso.png",
        description: ""
    },
    {
        productName: "Kopi Hitam",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/28 Kopi hitam Cr1.png",
        description: ""
    },
    {
        productName: "Kopi Tubruk",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/23 tubruk.png",
        description: ""
    },
    {
        productName: "KSTG",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/27 KSTG .png",
        description: ""
    },
    {
        productName: "Kopi Tutup",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Coffee/29 kopi tutup.png",
        description: ""
    },
    {
        productName: "Kopi Espresso Susu",
        category: "Hot",
        price: "10.000",
        image: "Menu-Items/Modern-Drink/49 espresso susu.png",
        description: ""
    },
    ],
};

for (let i of products.datakopi) {
    //Create Card
    let card = document.createElement("div");
    //Card should have category and should stay hidden initially
    card.classList.add("card", i.category, "hide");
    card.addEventListener('click', function(){
        // debugger
        let productName = i.productName.toLowerCase();
        let cards = document.querySelectorAll('.card');
        for(let card of cards){
            let cardProductName = card.querySelector('.product-name').innerText.toLowerCase();
            if (cardProductName === productName) {
                let overlays = document.getElementsByClassName('overlay');
                for (let overlay of overlays) {
                    overlay.style.visibility = "visible";
                    let popup = document.getElementsByClassName('popup');
                    for (let showpopup of popup){
                        showpopup.style.visibility = "visible";
                        showpopup.style.opacity = 1;
                        showpopup.querySelector('.ProductName').innerText = cardProductName;
                    }
                }
                let imageMenuDiv = document.querySelector('.ImageMenu');
                imageMenuDiv.innerHTML = '';

                // Append new image to ImageMenu
                let imgContainer = document.createElement("div");
                let image = document.createElement("img");
                image.setAttribute("src", i.image);
                imgContainer.appendChild(image);
                imageMenuDiv.appendChild(imgContainer);
                break;
            }

        }

        let closeButton = document.querySelector('.popup .x');

        // Add a click event listener to the close button
        closeButton.addEventListener('click', function(event) {
            // Prevent the default behavior of the anchor tag (page refresh)
            event.preventDefault();

            // Find the closest popup element and hide it
            let popup = this.closest('.popup');
            popup.style.visibility = "hidden";
            popup.style.opacity = 0;

            let overlays = document.getElementsByClassName('overlay');
            for (let overlay of overlays) {
                overlay.style.visibility = "hidden";
            }
        });
    });

    //image div
    let imgContainer = document.createElement("div");
    imgContainer.classList.add("image-container");
    //img tag
    let image = document.createElement("img");
    image.setAttribute("src", i.image);
    imgContainer.appendChild(image);
    card.appendChild(imgContainer);
    //container
    let container = document.createElement("div");
    container.classList.add("container");
    //product name
    let name = document.createElement("h5");
    name.classList.add("product-name");
    name.id = "Description";
    // name.style.textAlign = "left";
    name.innerText = i.productName.toUpperCase();
    container.appendChild(name);
    //price
    let price = document.createElement("h6");
    price.id = "Description";
    // price.style.textAlign = "left"
    price.innerText = "Rp. " + i.price;
    container.appendChild(price);

    card.appendChild(container);
    document.getElementById("products").appendChild(card);
}

//parameter passed from button (Parameter same as category)
function filterProduct(value) {
    // console.log(value);
    // console.log(products);
    //Button class code
    let buttons = document.querySelectorAll(".button-value");
    buttons.forEach((button) => {
    //check if value equals innerText
    if (value.toUpperCase() == button.innerText.toUpperCase()) {
        button.classList.add("active");
    } else {
        button.classList.remove("active");
    }
    });

    //select all cards
    let elements = document.querySelectorAll(".card");
    //loop through all cards
    elements.forEach((element) => {
    //display all cards on 'all' button click
    if (value == "all") {
        element.classList.remove("hide");
    } else {
            //Check if element contains category class
        if (element.classList.contains(value)) {
            //display element based on category
            element.classList.remove("hide");
        } else {
            //hide other elements
            element.classList.add("hide");
        }
    }
    });
}

//Search button click
document.getElementById("search").addEventListener("click", () => {
    //initializations
    let searchInput = document.getElementById("search-input").value;
    let elements = document.querySelectorAll(".product-name");
    let cards = document.querySelectorAll(".card");

    //loop through all elements
    elements.forEach((element, index) => {
    //check if text includes the search value
    if (element.innerText.includes(searchInput.toUpperCase())) {
        //display matching card
        cards[index].classList.remove("hide");
    } else {
        //hide others
        cards[index].classList.add("hide");
    }
    });
});

//Initially display all products
window.onload = () => {
    filterProduct("all");
};
